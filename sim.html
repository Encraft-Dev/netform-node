<html>
<head>
<title>Netform</title>
<style>
	body{margin-bottom: 100px}
	.veh{}
	.veh_id{display:inline-block;padding-left:10px;width:20px;}
	.veh_status{display:inline-block;padding-left:10px;width:200px;}
	.veh_state{display:inline;padding-left:10px;}
	#controlpanel{display:none;bottom:0;position:fixed;width:100%;border:1px solid #ccc;background:white;z-index:1000;}
	.controls{display:none;}
	.status_vis{display:inline-block;border:1px solid #ccc;}
	.veh_maxcap{display:inline-block;width:400px;}
	.veh_state_vis{display:block;height:9px;}

</style>
</head>
<body>
<h1>Netform Simulation</h1>

<div id="simulation">
	<div>
		<label for="time">Time</label>
		<input type="number" id="time" name="time" value="1440"/>
		<label for="slots">Slots</label>
		<input type="number" id="slots" name="slots" value="25"/>
		<label for="seed">Seed</label>
		<input type="number" id="seed" name="seed" value="1234"/>
	</div>
	<div>
		<label for="discharge">Discharge Events</label><input type="checkbox" id="Discharge" name="discharge" checked/>
		<label for="slow_charge">Constant Slow Charge</label><input type="checkbox" id="Slow_Charge" name="slow_charge" checked/>
		<label for="export_cap">Export Cap</label>
		<input type="number" id="exportCap" name="export_cap" value="40"/>
		<label for="import_cap">Import Cap</label>
		<input type="number" id="importCap" name="import_cap" value="40"/>
	</div>
	<div>	<button id="start">Run Simulation</button>
	</div>

</div>
<p class="controls">View simulation (controls below when ready)</p>
<div id= "controlpanel">
		<button id="step_bk"><<</button>
		<button id="step">>></button>
		<button id="control">Run</button>
		<input type="number" name="timestep" id="timestep" value="100" width="20px"/>
		<input type="number" name="jumpto" id="jumpto" value=0 width="20px/>"
		<span>System Time: </span><span id = "systemtime"></span>
		<span> | Event:</span><span id="systemevents"></span>
</div>
<h2>Population</h2>
<div id="plot_population"></div>
<h2>Available Capacity (kWh)</h2>
<div id="plot_capacity"></div>
<h2>Energy flow (kW)</h2>
<div id="plot_energy_flow"></div>
<hr />
<h2>On charger</h2>
<div id="list"></div><hr />
<h2>Queueing</h2>
<div id="queue"></div><hr />
<h2>Left</h2>
<div id="exit"></div>


<script src="assets/js/plotly-latest.min.js"></script>
<script type="text/javascript" src='assets/js/jquery-3.2.0.min.js'></script>
<script type="text/javascript" src='assets/js/sim-0.26.js'></script>
<script type="text/javascript"  src='modules/data.js'></script>	
<script type="text/javascript"  src='modules/system.js'></script>	
<script type="text/javascript"  src='modules/simulation.js'></script>	

<script>
$("#start").click(function(){startsim($("#time").val(),$("#slots").val(),$("#seed").val())})
$("#stop").click(function(){stopsim()})
$("#step").click(function(){tickstep(1)})
$("#step_bk").click(function(){tickstep(-1)})
$("#control").click(function(){tickstepcontrol()})
$("#timestep").bind('input', function(){console.log($("#timestep").val())})
$("#Discharge").change(function(){systemControl("discharge",$("#Discharge").prop("checked"))})
$("#Slow_Charge").change(function(){systemControl("slow_charge",$("#Slow_Charge").prop("checked"))})
$("#exportCap").change(function(){systemControl("export_cap",$("#exportCap").val())})
$("#importCap").change(function(){systemControl("import_cap",$("#importCap").val())})
$("#importCap").val(system.control.import_cap)
$("#exportCap").val(system.control.export_cap)
$("#jumpto").change(function(){jumptotime($("#jumpto").val())})
</script>

	</body>

</html>