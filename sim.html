<html>
<head>
<title>Netform</title>
<!-- <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet"/> -->
<link href="assets/bootstrap_themes/yeti.css" rel="stylesheet"/>
<style>
	body{margin-bottom: 100px}
	.veh{}
	.veh_id{display:inline-block;padding-left:10px;width:20px;}
	.veh_status{display:inline-block;padding-left:10px;width:200px;}
	.veh_state{display:inline;padding-left:10px;}
	#controlpanel{display:none;bottom:0;left:0;padding:5px;position:fixed;width:100%;border:1px solid #ccc;background:white;z-index:1000;}
	.controls{display:none;}
	.status_vis{display:inline-block;border:1px solid #ccc;}
	.veh_maxcap{display:inline-block;width:400px;}
	.veh_state_vis{display:block;height:9px;}

</style>
</head>
<body >
<div class="container-fluid">
	<h1>Netform Simulation</h1>
	<div class="panel panel-success">
		<div class="panel-heading">Simulation Control</div>
		<div class="panel-body">
			<div id="simulation">
				<div class="form">
					<div class="row">
						<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
							<div class="form-group">
								<button class="btn btn-default" id="start">Run Simulation</button>
							</div>
						</div>
						<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
							<div class="form-group">
								<input  type="checkbox" id="Discharge" name="discharge" checked/>
								<label for="discharge">Discharge Events</label><br/>
								<input   type="checkbox" id="Slow_Charge" name="slow_charge" checked/>
								<label for="slow_charge">Constant Slow Charge</label>
								
								
							</div>
						</div>
					</div><!-- row -->
					<div class="row">
						<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
							<div class="form-group">
								<label for="time">Time</label>
								<input class="form-control" type="number" id="time" name="time" value="1440"/>
							</div>
						</div>
						<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
							<div class="form-group">
								<label for="slots">Slots</label>
								<input class="form-control" type="number" id="slots" name="slots" value="25"/>
							</div>	
						</div>
						<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
							<div class="form-group"><label for="seed">Seed</label>
								<input class="form-control" type="number" id="seed" name="seed" value="1234"/>
							</div>	
						</div>
						<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
							<div class="form-group">
								<label for="export_cap">Export Cap</label>
								<input  class="form-control" type="number" id="exportCap" name="export_cap" value="40"/>
							</div>
						</div>
						<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
							<div class="form-group">
								<label for="import_cap">Import Cap</label>
								<input  class="form-control" type="number" id="importCap" name="import_cap" value="40"/>
							</div>
						</div>
						
					</div><!-- row -->
				</div><!-- form -->

				
			</div>
			<p class="controls">View simulation (controls below when ready)</p>
		</div>


	</div>




<div class="row">
	<div class="col-md-6">
		<div class="panel panel-info">
			<div class="panel-heading">Population</div>
			<div class="panel-body">
				<div id="plot_population"></div>
			</div>
		</div>
	</div>

	<div class="col-md-6">
		<div class="panel panel-info">
			<div class="panel-heading">Available Capacity (kWh)</div>
			<div class="panel-body">
				<div id="plot_capacity""></div>
			</div>
		</div>
	</div>
</div>

<div class="panel panel-info">
	<div class="panel-heading">Energy flow (kW)</div>
	<div class="panel-body">
		<div id="plot_energy_flow"></div>
	</div>
</div>

<div class="row">
<div class="col-md-12">
	<div class="panel panel-info">
		<div class="panel-heading">Vehicles</div>
		<div class="panel-body">
			<div class="panel">
				<div class="panel-body">
					<h4>On Charger</h4>
					<table id="list" class="table table-condensed"></table>
				</div>
			</div>
			<div class="panel">
				<div class="panel-body">
					<h4>Queueing</h4>
					<table id="queue" class="table table-condensed"></table>
				</div>
			</div>
			<div class="panel">
				<div class="panel-body">
					<h4>Departed</h4>
					<table id="exit" class="table table-condensed"></table>
				</div>
			</div>
		</div>
	</div>
</div>	

</div>
</div><!-- end container -->


<!-- Floating Controls -->
		<div class="panel-info" id= "controlpanel">
			<div class="panel-heading" id="systemtime">Visualisation Controls</div>
			<div class="panel-body">
				<div class="form-inline">
					<div class="form-group">
						<button class="btn btn-default" id="control">Run  </button>
					</div>
					<div class="input-group">
						<input type="number"  hidden name="timestep" id="timestep" value="100" width="20px"/>
						<div class="btn-group">
							<button type="button" class="btn btn-default" id="faster"><span class="glyphicon glyphicon-plus"></span></button>
							<button type="button" class="btn btn-default" id="slower"><span class="glyphicon glyphicon-minus"></span></button>
						</div>
					</div>
					<div class="btn-group">
						<button type="button" class="btn btn-default" id="step_bk"><span class="glyphicon glyphicon-backward"></span></button>
						<button type="button" class="btn btn-default" id="step"><span class="glyphicon glyphicon-forward"></span></button>
					</div>

					 <div class="input-group">
	      				<span class="input-group-btn">
	       				<button class="btn btn-default" type="button">Jump to</button>
	      				</span>
	      				<input type="number" id="jumpto" name="jumpto" value=0 class="form-control" placeholder="Jump to...">
	   				 </div><!-- /input-group -->
					<span> | Event:</span><span id="systemevents"></span>

				</div>
			</div>
		</div>



<script src="assets/js/plotly-latest.min.js"></script>
<script type="text/javascript" src='assets/js/jquery-3.2.0.min.js'></script>
<script type="text/javascript" src='assets/js/sim-0.26.js'></script>
<script type="text/javascript"  src='modules/data.js'></script>	
<script type="text/javascript"  src='modules/system.js'></script>	
<script type="text/javascript"  src='modules/simulation.js'></script>	

<script>
$("#start").click(function(){startsim($("#time").val(),$("#slots").val(),$("#seed").val())})
$("#stop").click(function(){stopsim()})
$("#step").click(function(){tickstep(1)})
$("#step_bk").click(function(){tickstep(-1)})
$("#control").click(function(){tickstepcontrol()})
$("#faster").click(function(){playbackSpeed(1)})
$("#slower").click(function(){playbackSpeed(-1)})
$("#timestep").bind('input', function(){console.log($("#timestep").val())})
$("#Discharge").change(function(){systemControl("discharge",$("#Discharge").prop("checked"))})
$("#Slow_Charge").change(function(){systemControl("slow_charge",$("#Slow_Charge").prop("checked"))})
$("#exportCap").change(function(){systemControl("export_cap",$("#exportCap").val())})
$("#importCap").change(function(){systemControl("import_cap",$("#importCap").val())})
$("#importCap").val(system.control.import_cap)
$("#exportCap").val(system.control.export_cap)
$("#jumpto").change(function(){jumptotime($("#jumpto").val())})
</script>

	</body>

</html>